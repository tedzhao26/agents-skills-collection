# 输出格式模板

## 报告文件结构

```markdown
# 文档一致性审核报告

> 审核时间: YYYY-MM-DD
> 项目: [项目名称]
> 审核范围: README.md, docs/**/*.md

## 问题列表

[问题项 1-N...]

## 审核结论

[结论汇总...]
```

---

## 单个问题项模板

```markdown
### [序号]. [一句话概括问题]

- **严重级别**: P0 / P1 / P2 / P3 / 待证据补充
- **位置**:
  - 文档: `<文件路径>:<行号>`
  - 代码: `<文件路径>:<行号>`
- **证据**:
  - 文档片段:
    ```
    [简要引用相关描述]
    ```
  - 代码片段:
    ```typescript
    [简要引用关键实现/配置]
    ```
- **影响**:
  - [会如何误导用户/调用方/开发者？可能产生什么后果？]
- **建议（最小修正）**:
  - [建议修改「文档」或「代码」中的哪一方？给出最小可行的修正方向]
- **关联原则**:
  - [以代码为真 / 合同优先 / 面向用户承诺优先 / 安全默认收紧 / 术语枚举一致 / 可运行可复现]
```

---

## 审核结论模板

```markdown
## 审核结论

### 结论

- [ ] **通过** - 无 P0/P1 问题
- [ ] **有条件通过** - 需先修复以下前置条件：
  1. [必须先修复的问题]
  2. ...
- [ ] **不通过** - 存在以下阻断项：
  1. [阻断问题]
  2. ...

### 汇总统计

| 级别 | 数量 |
|------|------|
| P0 Blocker | x |
| P1 Major | x |
| P2 Minor | x |
| P3 Nit | x |
| 待证据补充 | x |
| **总计** | **x** |

### 建议修复优先级

1. **立即修复 (P0)**:
   - #[问题序号]: [简述]
2. **优先修复 (P1)**:
   - #[问题序号]: [简述]
3. **计划修复 (P2)**:
   - #[问题序号]: [简述]
4. **低优先级 (P3)**:
   - 视排期统一处理

### 变更影响

| 影响范围 | 是否需要 | 说明 |
|----------|----------|------|
| Demo 更新 | 是/否 | [具体说明] |
| 截图更新 | 是/否 | [具体说明] |
| 脚本更新 | 是/否 | [具体说明] |
| Changelog | 是/否 | [具体说明] |
| 对外通知 | 是/否 | [具体说明] |
```

---

## 示例问题项

### 1. contextIsolation 安全配置与文档描述不一致

- **严重级别**: P0
- **位置**:
  - 文档: `docs/security.md:45`
  - 代码: `src/main/window.ts:23`
- **证据**:
  - 文档片段:
    ```
    所有渲染进程均启用 contextIsolation，确保 preload 脚本与页面脚本隔离
    ```
  - 代码片段:
    ```typescript
    webPreferences: {
      contextIsolation: false, // 实际未启用
      nodeIntegration: true
    }
    ```
- **影响**:
  - 用户/审计人员会误认为应用已启用安全隔离，实际存在 XSS 攻击风险
- **建议（最小修正）**:
  - 修改代码，将 `contextIsolation` 设为 `true`，并通过 preload 脚本暴露必要 API
- **关联原则**:
  - 安全默认收紧、以代码为真

---

### 2. API 端点 /api/users 返回字段与文档不一致

- **严重级别**: P1
- **位置**:
  - 文档: `docs/api.md:120`
  - 代码: `src/routes/users.ts:45`
- **证据**:
  - 文档片段:
    ```
    返回字段: id, name, email, createdAt, updatedAt
    ```
  - 代码片段:
    ```typescript
    return { id, name, email, created_at, updated_at }; // snake_case
    ```
- **影响**:
  - 前端按文档使用 camelCase 会取不到值
- **建议（最小修正）**:
  - 更新文档，标注实际字段名为 snake_case
- **关联原则**:
  - 以代码为真、术语枚举一致
